<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login / Signup - St Paul Learning Centre</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #f9f9f9;
      color: #333;
    }

    /* 🔵 Navbar */
    .navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: #004080;
      padding: 10px 15px;
      color: white;
      position: relative;
      z-index: 2;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    .menu-btn {
      font-size: 24px;
      cursor: pointer;
      color: white;
    }

    .navbar-center {
      display: flex;
      align-items: center;
      justify-content: center;
      flex: 1;
      text-align: center;
      position: relative;
    }

    .school-logo {
      width: 70px;
      height: auto;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .school-logo:hover {
      transform: scale(1.1);
      box-shadow: 0 0 15px #00ccff;
    }

    .logo-text {
      font-size: 20px;
      font-weight: bold;
      margin-left: 10px;
    }

    /* 📱 Side Menu */
    .side-menu {
      height: 100%;
      width: 0;
      position: fixed;
      z-index: 10;
      top: 0;
      left: 0;
      background-color: #002b5c;
      overflow-x: hidden;
      transition: width 0.4s ease;
      padding-top: 60px;
    }

    .side-menu a {
      padding: 15px 30px;
      text-decoration: none;
      color: white;
      font-size: 18px;
      display: block;
      transition: 0.3s;
    }

    .side-menu a:hover {
      background-color: #0056b3;
    }

    .side-menu .close-btn {
      position: absolute;
      top: 10px;
      right: 25px;
      font-size: 36px;
      color: white;
      cursor: pointer;
    }

    /* 🧩 Login Section */
    section {
      max-width: 400px;
      margin: 60px auto;
      padding: 20px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      text-align: center;
    }

    section h2 {
      color: #004080;
      margin-bottom: 20px;
    }

    input {
      width: 90%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    button {
      background-color: #004080;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 10px 20px;
      font-size: 16px;
      margin: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #0059b3;
    }

    .forgot {
      color: #004080;
      cursor: pointer;
      text-decoration: underline;
    }

    footer {
      text-align: center;
      margin-top: 40px;
      padding: 15px;
      background-color: #004080;
      color: white;
    }
  </style>
</head>

<body>

  <!-- 🏫 Top Navbar -->
  <div class="navbar">
    <span class="menu-btn" onclick="openMenu()">&#9776;</span>
    <div class="navbar-center">
      <a href="https://nicholasbagenda.netlify.app" target="_blank">
        <img src="https://i.postimg.cc/t4yDG3Fq/Mon-21-07-2025-16-26-06.png" alt="School Logo" class="school-logo">
      </a>
      <span class="logo-text">St Paul Learning Centre</span>
    </div>
  </div>

  <!-- 📋 Sidebar Menu -->
  <nav id="sideMenu" class="side-menu">
    <a href="javascript:void(0)" class="close-btn" onclick="closeMenu()">&times;</a>
    <li><a href="index.html">📰 News & Announcements</a></li>
    <li><a href="student-portal.html">🎓 Student Portal</a></li>
    <li><a href="admissions.html">📋 Admissions</a></li>
    <li><a href="resources.html">📘 Resources</a></li>
    <li><a href="showcase.html">🌟 Showcase</a></li>
    <li><a href="contact.html">📞 Contact</a></li>
    <li><a href="class.html">🗓️ Timetable</a></li>
    <li><a href="resources.html">👩‍🏫 Teacher Resources</a></li>
    <li><a href="parent-portal.html">👨‍👩‍👧 Parent Portal</a></li>
  <li><a href="calculator.html">🧮 calculator</a></li>
  </nav>

  <!-- 🔐 Login / Signup -->
  <section>
    <h2>Login / Signup</h2>
    <input type="email" id="email" placeholder="Email" required><br>
    <input type="password" id="password" placeholder="Password" required><br>
    <button onclick="login()">Login</button>
    <button onclick="signup()">Sign Up</button><br><br>
    <button onclick="googleSignIn()" style="background-color:#4285F4;color:white;padding:10px 20px;border:none;border-radius:5px;">
      Sign in with Google
    </button>
    <p><span class="forgot" onclick="resetPassword()">Forgot Password?</span></p>
    <p id="message" style="color:red; font-weight:600;"></p>
  </section>

  <footer>
    &copy; 2025 St Paul Learning Centre. All rights reserved.
  </footer>

  <!-- ⚙️ Sidebar Toggle -->
  <script>
    function openMenu() {
      document.getElementById("sideMenu").style.width = "280px";
    }
    function closeMenu() {
      document.getElementById("sideMenu").style.width = "0";
    }
  </script>

  <!-- 🔥 Firebase Authentication -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { 
      getAuth, 
      signInWithEmailAndPassword, 
      createUserWithEmailAndPassword, 
      sendPasswordResetEmail,
      GoogleAuthProvider,
      signInWithPopup
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBvLXOx9N88hBBLMHVCcEM3zBK-AYfQI_o",
      authDomain: "my-school-st-paul-1455a.firebaseapp.com",
      projectId: "my-school-st-paul-1455a"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    async function logUser(uid, email, type) {
      await setDoc(doc(db, "signedInUsers", uid), {
        email,
        type,
        lastAction: new Date().toISOString()
      });
    }

    // 🧑‍🎓 Login
    window.login = function() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      signInWithEmailAndPassword(auth, email, password)
        .then(userCred => {
          logUser(userCred.user.uid, userCred.user.email, "login");
          window.location.href = "index.html";
        })
        .catch(err => document.getElementById("message").innerText = err.message);
    }

    // 🧾 Signup
    window.signup = function() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      createUserWithEmailAndPassword(auth, email, password)
        .then(userCred => {
          logUser(userCred.user.uid, userCred.user.email, "signup");
          window.location.href = "index.html";
        })
        .catch(err => document.getElementById("message").innerText = err.message);
    }

    // 🔑 Google Sign-in
    window.googleSignIn = function() {
      const provider = new GoogleAuthProvider();
      signInWithPopup(auth, provider)
        .then(result => {
          logUser(result.user.uid, result.user.email, "google-login");
          window.location.href = "index.html";
        })
        .catch(err => document.getElementById("message").innerText = err.message);
    }

    // 📧 Password Reset
    window.resetPassword = function() {
      const email = document.getElementById("email").value;
      if (!email) {
        document.getElementById("message").innerText = "Enter your email to reset password.";
        return;
      }
      sendPasswordResetEmail(auth, email)
        .then(() => document.getElementById("message").innerText = "Password reset email sent!")
        .catch(err => document.getElementById("message").innerText = err.message);
    }
  </script>
</body>
</html>
